<!DOCTYPE html>
<html>
<head>
  <title>SmartGate Admin Dashboard</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <h1>SmartGate Admin Dashboard</h1>

  <section>
    <h2>Permanent Access Vehicles</h2>
    <table>
      <tr><th>Plate</th><th>Status</th></tr>
      {% for v in vehicles %}
      <tr><td>{{v.plate}}</td><td>{{v.status}}</td></tr>
      {% endfor %}
    </table>
  </section>

  <section>
    <h2>Recent Logs</h2>
    <table>
      <tr><th>Plate</th><th>Status</th><th>Time</th></tr>
      {% for l in logs %}
      <tr>
        <td>{{l.plate}}</td>
        <td>{{l.status}}</td>
        <td>{{l.timestamp}}</td>
      </tr>
      {% endfor %}
    </table>
  </section>

  <section>
    <h2>Register Vehicle</h2>
    <form id="registerForm">
      <input type="text" name="plate" placeholder="Enter Plate" required>
      <select name="type">
        <option value="permanent">Permanent</option>
        <option value="one_time">One-time</option>
      </select>
      <button type="submit">Register</button>
    </form>
  </section>

  <script>
  document.getElementById("registerForm").onsubmit = async (e)=>{
    e.preventDefault();
    const form = e.target;
    const res = await fetch('/api/register', {
      method:'POST',
      headers:{'Content-Type':'application/json', 'x-admin-token':'admin123'},
      body: JSON.stringify({plate: form.plate.value, type: form.type.value})
    });
    alert('Registered Successfully');
    location.reload();
  }
  </script>
</body>
</html>

